<html>
<head>

    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">

	<link rel="stylesheet" href="{{ url_for('static',filename='bootstrap-4.0.0.min.css') }}">
	<link rel="stylesheet" href="{{ url_for('static',filename='style/style.css') }}">
	<link rel="stylesheet" href="{{ url_for('static',filename='style/visualizations_style.css') }}">
	<link rel="stylesheet" href="{{ url_for('static',filename='style/home_style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='style/datasets_style.css') }}">


	<script src="{{ url_for('static',filename='jquery-3.2.1.js') }}"></script>
	<script src="{{ url_for('static',filename='bootstrap-4.0.0.min.js') }}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

{#  Includes van inte voor de chart  #}
    <script src="../static/myCharts.js"></script>
    <script src="../static/metrics1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
{#    #}


</head>
<body>

<nav class="navbar" id="navbar">
        <div class="navbar_container">
            <div class="navbar_toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="navbar_menu">
                <li class="navbar_items"><a class="navbar_links" id="home-page" href="home">Home</a></li>
                <li class="navbar_items"><a class="navbar_links" id="services-page" href="services">A/B-test</a></li>
                <li class="navbar_items"><a class="navbar_links" id="datasets-page" href="datasets">Datasets</a></li>
                <li class="navbar_items"><a class="navbar_links" id="visualizations-page" href="visualizations">Visualizations</a></li>
                <li class="navbar_items"><a class="navbar_links" id="testlist-page" href="testlist">Testlist</a></li>
            </ul>
        </div>
    </nav>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="#">User section</a>
  <a href="#">Item section</a>
  <a href="#">A/B-test section</a>
  <a href="#">Metrics</a>
</div>

<div class="page">

<span style="font-size:30px;cursor:pointer; position: fixed; left: 10px;color:white;" onclick="openNav()">&#9776;</span>

<div class="card_section" id="user_section">
    <h1>User section</h1>
    <div class="card_wrapper">
        <div class="card">
        <div class="card">

        </div>
        <div class="card">

        </div>
    </div>

</div>

<div style="position:absolute; width: 100%">
    <hr style="position: relative; height: 2px; background-color: white; border: 0; margin-left: 10%; margin-right: 10%">
</div>

<div class="card_section" id="item_section">

    <h1>Item section</h1>
    <div class="card_wrapper">
        <div class="card">

        </div>
        <div class="card">

        </div>
    </div>

</div>

<div style="position:absolute; width: 100%">
    <hr style="position: relative; height: 2px; background-color: white; border: 0; margin-left: 10%; margin-right: 10%">
</div>

<div class="card_section" id="abtest_section">

<h1>A/B-test section</h1>
<div class="card_wrapper">
    <div class="card">

    </div>
    <div class="card">

    </div>
</div>
    <div>
        <input type="file" id="input">
    </div>
</div>

<div id="chart_div" style="width:800px; height:600px"></div>

{#TODO: Dit moet nog op de juiste plaats komen te staan#}
<canvas id="myChart" width="300px" height="250px"></canvas>
</div>

</div>


<script>

    drawChart()

{#window.onload = runscript();#}
function openNav() {
  document.getElementById("mySidenav").style.width = "300px";
}
function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}

{#google.charts.load('current', {'packages':['corechart']});#}
{#google.charts.setOnLoadCallback(drawBubbleChart);#}
{##}
{#const input = document.getElementById("input");#}
{#input.addEventListener('change', () => {#}
{#    let files = input.files;#}
{#    if (files.length == 0) return;#}
{##}
{#    const file = files[0];#}
{##}
{#    let reader = new FileReader();#}
{##}
{#    reader.onload = (e) => {#}
{##}
{#        const file = e.target.result;#}
{#        const lines = file.split(/\r\n|\n/);#}
{##}
{#        var datachar = []#}
{##}
{#        var addHeader = true;#}
{#        var row = []#}
{#        var res, name, windowsize, date, start, end, topk = ""#}
{##}
{#        for (let i = 1; i < lines.length; i++) {#}
{##}
{#            if (lines[i] == "]") {#}
{#                addHeader = false;#}
{#                datachar.push(row)#}
{#                row = []#}
{#            }#}
{#            else if (addHeader && lines[i] != "["){#}
{#                row.push(lines[i]);#}
{#            }#}
{#            else {#}
{#                var itemVal = lines[i].split(': ')[1]#}
{#                var itemName = lines[i].split(': ')[0]#}
{##}
{#                if (itemName == "result_id"){#}
{#                    res = itemVal#}
{#                }#}
{#                else if (itemName == "name"){#}
{#                    name = itemVal#}
{#                }#}
{#                else if (itemName == "windowsize"){#}
{#                    windowsize = itemVal#}
{#                }#}
{#                else if (itemName == "current date"){#}
{#                    date = itemVal#}
{#                }#}
{#                else if (itemName == "start_point"){#}
{#                    start = itemVal#}
{#                }#}
{#                else if (itemName == "end_point"){#}
{#                    end = itemVal#}
{#                }#}
{#                else if (itemName == "topk"){#}
{#                    topk = itemVal#}
{#                }#}
{#                else {#}
{#                    row = [topk, new Date(date), parseInt(res), name]#}
{#                    if (itemName == "items") {#}
{#                        var number = itemVal.substring(1, itemVal.length-1);#}
{#                        var numbers = number.split(', ');#}
{#                        numbers = numbers.map(function (x) {#}
{#                            return parseInt(x, 10);#}
{#                        });#}
{#                        row = row.concat(numbers);#}
{#                        datachar.push(row)#}
{#                    }#}
{#                }#}
{##}
{#            }#}
{#        }#}
{##}
{##}
{##}
{#        drawBubbleChart(datachar, start, end, topk);#}
{#    }#}
{#    reader.onerror = (e) => alert(e.target.error.name);#}
{#    reader.readAsText(file);#}
{##}
{#})#}
{##}
{#function drawBubbleChart(datachar, start, end, topk){#}
{#        console.log("print")#}
{#        var data = google.visualization.arrayToDataTable(datachar);#}
{#        console.log(data);#}
{#        var options = {#}
{#            title: 'A/B test (' + ' begin date: ' + start + ', end date: ' + end + ', top-k: ' + topk + ')',#}
{#            hAxis: {title: 'Current Date'},#}
{#            vAxis: {title: 'Algorithm'},#}
{#            bubble: {textStyle: {fontSize: 11}}#}
{#        };#}
{##}
{#        var chart = new google.visualization.BubbleChart(document.getElementById('chart_div'));#}
{#        chart.draw(data, options);#}
{#}#}



</script>

</body>



</html>




